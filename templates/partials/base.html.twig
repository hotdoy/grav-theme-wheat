{{ dump(page) }}
{% set root_params = page.find('/_root-params/') %}
<!DOCTYPE html> 
<html lang="{{ grav.language.getActive ?: grav.config.site.default_lang }}">
	<head>
		{% block metadata %}{% include 'partials/metadata.html.twig' %}{% endblock %}
		{% block canonical %}<link rel="canonical" href="{{ page.url(true, true) }}" />{% endblock %}
		{% block favicon %}{% include 'partials/favicon.html.twig' %}{% endblock %}
		<link rel="preload" href="{{ url('theme://fonts/inter-v1-latin-regular.woff2', true) }}" as="font" crossorigin>
		<link rel="preload" href="{{ url('theme://fonts/inter-v2-latin-700.woff2', true) }}" as="font" crossorigin>
		{% include 'partials/js.html.twig' %}
		{% include 'partials/css.html.twig' %}
		{% block assets deferred %}
		{% if theme.snipcart %}
		<link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.1.0/default/snipcart.css">
		{% endif %}
		{{ assets.css()|raw }}
		{{ assets.js('top')|raw }}
		{% endblock %}
		{% block gtm_head %}{% include 'partials/gtm-head.html.twig' %}{% endblock %}
		{% block head_extra %}{% endblock %}
	</head>

    {% set theme_style -%}
    {%- if theme.color_bg %}--c-bg:{{ theme.color_bg }};{% endif -%}
    {%- if theme.color_fg %}--c-fg:{{ theme.color_fg }};{% endif -%}
    {%- if theme.color_hl %}--c-hl:{{ theme.color_hl }};{% endif -%}
    {% endset -%}

	<body class="{{ page.template }}{% if page.header.body_classes %} {{ page.header.body_classes }}{% endif %}"{% if theme_style %} style="{{ theme_style }}"{% endif %}>
		{% block loading %}{% include 'partials/loading.html.twig' %}{% endblock %}
		{% block header %}{% include 'partials/header.html.twig' %}{% endblock %}
		<main id="main">{% block content %}{% endblock %}</main>
		{% block footer %}{% include 'partials/footer.html.twig' %}{% endblock %}

		{% block snipcart %}{% include 'partials/snipcart.html.twig' %}{% endblock %}
		
		{% include 'partials/dialog.html.twig' %}
		{% include 'partials/dialog.html.twig' with {id: 'dialog-signin', content: 'THEME.DIALOG.SIGNIN'|t } %}
		{% include 'partials/dialog.html.twig' with {id: 'dialog-signout', content: 'THEME.DIALOG.SIGNOUT'|t } %}
		
		{{ assets.js('bottom')|raw }}
		{% if theme.snipcart %}<script async src="https://cdn.snipcart.com/themes/v3.1.0/default/snipcart.js"></script>{% endif %}
		{% block serviceworker %}{% include 'partials/serviceworker.html.twig' %}{% endblock %}
		{% block gtm_body %}{% include 'partials/gtm-body.html.twig' %}{% endblock %}
		<!-- {{ grav.theme.getBlueprint().name }} {{ grav.theme.getBlueprint().version }} -->
	</body>
</html>
